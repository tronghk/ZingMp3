<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./assets/css/styles.css">
    <link rel="stylesheet" href="./assets/fonts/fontawesome-free-6.1.2-web/css/all.min.css">
    <title>ZingMp3</title>
</head>
<body>
     <div class="main">
        <div class="app">
            <div class="cart_use">
                <div class="cart_use_info"> 
                        <img class="cart_use_img" src="./assets/fonts/img/LeBaoBinh.jpg" alt="Bài hát đang nghe">
                        <div class="cart_use_name">
                           <a href=""> <p class="cart_use_name_Music">Cuộc vui cô đơn</p> </a>
                           <a href=""><p class="cart_use_name_singer">Lê Bảo Bình</p>    </a>   
                        </div>
                        <div class="cart_use_icon">
                            <div class="cart_use_icon-level-button">
                                <button>
                                    
                                    <i onclick="display_color()" class="fa-solid fa-heart"></i>
                                </button>
                            </div>
                            <div class="cart_use_icon-level-button">
                                <button>
                                    <i class="fa-solid fa-ellipsis" style="font-weight: 1000; color: white;"></i>
                                </button>
                            </div>                  
                        </div>
                </div>
                <div class="cart_use_between">
                    <div>
                        <div class="cart_use_between-level-item">
                            <div  class="cart_use-actions">
                                <button class="cart_use_action-button">
                                    <i onclick="change_color_action(0)" class="fa-solid fa-shuffle"></i>
                                </button>
                                <button class="cart_use_action-button">
                                    <i   class="fa-solid fa-backward-step action_button-active"></i>
                                </button>
                                <button onclick="change_playOrPause(this)" class="cart_use_action-button button_play">
                                    <i class="action_icon-play fa-solid fa-play "></i>
                                    <i class="fa-solid fa-pause"></i>
                                </button>
                                <button class="cart_use_action-button">
                                    <i class="fa-solid fa-forward-step  action_button-active"></i>
                                </button>
                                <button class="cart_use_action-button">
                                    <i onclick="change_color_action(5)"  class="fa-solid fa-repeat"></i>
                                </button>
                            </div>
                        </div>
                        <div class="cart_use_betweem-sub-level-item">
                            <div class="cart_use-sub-actions">
                                <div class="cart_use-sub-left">
                                    <span>00:00</span>
                                </div>
                                <div class="cart_use_duration-bar runTimeCart">
                                    <div class="cart_use_timeRun-bar sub_runTimeCart"></div>
                                    <div class="cart_use_timeRun-bar sub_runTimeCart time_hover"></div>
                                </div>
                                <div class="cart_use-sub-right"><span> 00:10</span></div>
                            </div>
                        </div>
                    </div>
                </div>    


                <div class="cart_use-player-right">
                    <div class="cart_use_icon-level-button"><button>
                        <i class="fa-solid fa-clapperboard"></i>
                        </button>
                    </div>

                    <div class="cart_use_icon-level-button"><button>
                        <i class="fa-solid fa-headphones-simple"></i>
                        </button>
                    </div>

                    <div class="cart_use_icon-level-button"><button>
                            <i class="fa-solid fa-window-restore"></i>
                        </button>
                    </div>

                    <div class="cart_use_icon-level-button"><button>
                            <i class="fa-solid fa-volume-high"></i>
                        </button>
                    </div>
                        
                    <div class="cart_use_duration-bar">
                            <div class="cart_use_timeRun-bar"></div>
                    </div>

                    <div class="cart_use_icon-level-button "><button>
                    <span class="player_right-jamb"></span>
                        <i class="fa-solid fa-list-music" style="background: none;"></i>
                    </button>
                </div>
                </div>
                
                

            </div>
        
            <div class="container">
                <div class="container_left">
                    <div class="container_left-siderbar">
                        
                        <div class="left_siderbar-logo">
                            <div class="left_siderbar-logo-img"></div> 
                            <!-- xong -->
                        </div>

                        <div class="left_sliderbar-wrapper">
                            <ul class="sliderbar-navMenu">
                                <li class="navMenu-item">
                                    <a href="#">
                                        <i class="fa-solid fa-icons"></i>
                                        <span>Cá Nhân</span>
                                    </a>
                                </li>
                                <li class="navMenu-item">
                                    <a href="#">
                                        <i class="fa-solid fa-record-vinyl"></i>
                                        <span>Khám Phá</span>
                                    </a>
                                </li>
                                <li class="navMenu-item">
                                    <a href="#">
                                        <i class="fa-solid fa-circle icon-pos">
                                            <i class="fa-solid fa-arrow-trend-up icon-abs"></i>
                                        </i>
                                        <span>#zingchart</span>
                                        <button class="navMenu_item-play">
                                            
                                        </button>
                                    </a>
                                </li>
                                <li class="navMenu-item">
                                    <a href="#">
                                        <i class="fa-solid fa-guitar"></i>
                                        <span>Radio</span>
                                        <button class="navMenu_item-play"></button>
                                    </a>
                                </li>
                                <li class="navMenu-item">
                                    <a href="#">
                                        <i class="fa-solid fa-list-check"></i>
                                        <span>Theo Dõi</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        <div class="left_sliderbar-crossbar"></div>
                        <div class="left_sliderbar-scrollbar">
                            <ul class="sliderbar-navMenu">
                                <li class="navMenu-item">
                                    <a href="#">
                                        <i class="fa-solid fa-music"></i>
                                        <span>Nhạc Mới</span>
                                        <button class="navMenu_item-play"></button>
                                    </a>
                                </li>
                                <li class="navMenu-item">
                                    <a href="#">
                                        <i class="fa-solid fa-list-music"></i>
                                        <span>Thể Loại</span>
                                    </a>
                                </li>
                                <li class="navMenu-item">
                                    <a href="#">
                                        <i class="fa-solid fa-star"></i>
                                        <span>Top 100</span>
                                    </a>
                                </li>
                                <li class="navMenu-item">
                                    <a href="#">
                                        <i class="fa-solid fa-clapperboard"></i>
                                        <span>MV</span>
                                    </a>
                                </li>
                            </ul>

                            <div class="sliderbar_scrollbar_isMark">
                                <div class="scrollbar_isMark-card">
                                    <span class="text_card">Đăng nhập để khám phá playlist dành riêng cho bạn</span>
                                    <br>
                                    <br>
                                    <br>
                                    <br>
                                    <a href="" class="link-text-card">Đăng nhập</a>
                                </div>
                                <div class="scrollbar_isMark-card">
                                    <span class="text_card">Nghe nhạc không quảng cáo cùng kho nhạc VIP</span>
                                    <br>
                                    <br>
                                    <br>
                                    <br>
                                    <a href="" class="link-text-card">Nâng Cấp VIP</a>
                                </div>
                            </div>

                            <div class="sliderbar-crate-list">
                                <a href="#">
                                    <i></i>
                                    <span>Tạo playlist mới </span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="container_right">
                    <div class="header">
                
                        <div class="nav">
        
                        </div>
                    </div>
                    
                    <div class="content">
                        
                    </div>
                    <div class="footer">
        
                    </div>
                </div>
                

            </div>
         </div>
       
     </div>
</body>
    <script language="javascript">
        //sự kiện trái tim
        var heart_icon = document.querySelector('i.fa-heart');
        let boolean_heart = 0;
        
        function display_color(){
            if(!Boolean(boolean_heart)){
                Object.assign(heart_icon.style,{
                    color: '#c662ef',
                    fontWeight: '1000',
                } );
                boolean_heart = 1;
            }
            else{
                Object.assign(heart_icon.style,{
                    color: '#fff',
                    fontWeight: '500',
                } );
                boolean_heart = 0;
            }  
        }

        // sự kiện bài hát đã làm và chưa xử lý ngẫu nhiên
            const btn_action =document.querySelectorAll('.cart_use-actions i');
            var arr = new Map();
            function arr_runArrMaxLength(length){
                for(var i = 0;i<length;i++)
                    {
                        arr.set(i,0);
                    }
                    return arr;
            }
            arr_runArrMaxLength(btn_action.length);
            
            function change_color_action(index){
                    var value = arr.get(index);
                    if(value == 0){
                        btn_action[index].style.color = 'red';
                        arr.set(index, 1);
                    }
                    else{
                        btn_action[index].style.color = '#fff';
                        arr.set(index,0);
                    }
            }

        // sự kiện click play thì chạy thời lượng
         var bool_buttonPlay = 0;
         const subCrossbar_timePlay = document.querySelector('.sub_runTimeCart');
         const crossbar_timePlay = document.querySelector('.runTimeCart');

         //thời gian chạy 1s
            function crossbar_playMusic(){
                var maxTimeCart = document.querySelector('.cart_use-sub-right span').innerHTML;
                const arr_time = maxTimeCart.split(":");
                let sum_time = 0;
                for(var i = 0;i<arr_time.length;i++){
                    const temp = new Number(arr_time[i]);
                    if(i+1 != arr_time.length)
                        sum_time = sum_time + temp*60;
                    else
                        sum_time = sum_time+temp;
                }
                return sum_time/1000;
            }
            //lấy các phần tử cần dùng
            var run_cr = 0;
            function change_playOrPause(e){
                const children_btn = e.children;
                for(var i = 0;i<children_btn.length;i++){
                    var displayIcon = ""+getComputedStyle(children_btn[i]).display;
                    if(displayIcon.endsWith("none")){
                        displayIcon = "block";   
                    }else{
                        displayIcon = "none";
                    }
                    children_btn[i].style.display = displayIcon;
                }
                change_play();
            }
            function change_play(){
                const classPlay = document.querySelector('.action_icon-play');
                const displayclassPlay = classPlay.style.display;
                if(displayclassPlay.endsWith("none"))
                    play_cart();
                else
                    pause_cart();
            }

            function play_cart(){
                
               let width_crossbar1s =  crossbar_playMusic();
               let width_subCrossbarPause  = getComputedStyle(subCrossbar_timePlay).width;
               let with_crossbar = getComputedStyle(crossbar_timePlay).width;
               width_subCrossbarPause = parseFloat(width_subCrossbarPause.replace(".px", ""));
               with_crossbar = parseFloat(with_crossbar.replace(".px",""));
               let widthPxCrossbar = with_crossbar/100/width_crossbar1s/10;
                run_crossbar(widthPxCrossbar, width_subCrossbarPause,with_crossbar);
            }
            // stop crossbar 
            function pause_cart(){
                stopCrossbar();
            }
            //restart cart crossbar
            function restartCartCrossbar(){
                document.querySelector(".cart_use-sub-left span").innerHTML = "00" + ":"+ "00";
                subCrossbar_timePlay.style.width = '0%';
            }
            // thực hiện chạy crossbar
            var evStop = document.querySelector('.button_play');
            function run_crossbar(width1S, widthPause, maxWidth){  
                //stop when full time
                
                if(widthPause+width1S >= maxWidth){
                    restartCartCrossbar();
                    play_cart();
                    return;  

                }
                      
               run_cr = setInterval(function() {
                            let temp = 0+ ""+ getComputedStyle(subCrossbar_timePlay).width;
                            temp = parseFloat(temp.replace(".px",""));
                            temp = temp + width1S;
                            if(temp+width1S > maxWidth){
                                change_playOrPause(evStop);
                                stopCrossbar();
                            }

                            temp = temp + "px";
                            subCrossbar_timePlay.style.width = temp;   
                            runTimeLeft();
                            subCrossbar_Hover(width1S,maxWidth);
                }, 1000, 'false');
            }

            //crossbar Hover
            function subCrossbar_Hover(width1S, maxWidth){
                var crossbarHover = document.querySelector('.time_hover');
                var marginCrossbar = getComputedStyle(crossbarHover).margin
                marginCrossbar = parseFloat(marginCrossbar.replace(".px",""));
                marginCrossbar = marginCrossbar + width1S;
                marginCrossbar = marginCrossbar + "px";
                crossbarHover.style.marginLeft = marginCrossbar;
            }

            //fc stop
            function stopCrossbar() {
            clearInterval(run_cr);
            }

            // create method runtime
            function runTimeStartLeft(){
                var timeStart = document.querySelector(".cart_use-sub-left span").innerHTML;
                const arr_time = timeStart.split(":");
                let sum_time = 0;
                for(var i = 0;i<arr_time.length;i++){
                    const temp = new Number(arr_time[i]);
                    if(i+1 != arr_time.length)
                        sum_time = sum_time + temp*60;
                    else
                        sum_time = sum_time+temp;
                }
                return sum_time;
            }
            function runTimeLeft(){
                var timeStart = runTimeStartLeft();
                timeStart = timeStart+1;
                
                var timeMinutes = parseInt(timeStart/60+"");
                var timeSecond = parseInt(timeStart%60 +"");
                if(timeMinutes <10)
                timeMinutes = "0" + timeMinutes;

                if(timeSecond < 10)
                timeSecond = "0" +timeSecond;

                document.querySelector(".cart_use-sub-left span").innerHTML = timeMinutes + ":"+timeSecond;

            }

        
    </script>
</html>